\subsection{Reinterpreting identity as indiscernibility}

We start by assuming that we are given an identity relation $\approx$,
  which partitions the subject terms $S_G$ according to
  \mbox{equation} \ref{eq:equivalence_set}.

\begin{equation}
\label{eq:equivalence_set}
  \equivset{x}
=
  \setdef{
    y \in S_G
  }{
    \equivpair{x}{y}
  }
\end{equation}

\noindent Identity can be defined as the smallest equivalence relation,
  i.e. the most fine-grained partition of $S_G$.
For reasoning purposes, the fact that $\approx$ is an equivalence relation
  is important, since this allows for both symmetrical
  and transitive inference.
As we saw in principle \ref{principle:indiscernibility_of_identicals},
  identity implies indiscernibility with respect to all properties.

We can generalize the notion of indiscernibility
  by parameterizing the set of properties with respect to which
  indiscernibility is determined.
According to this generalization,
  resources $x$ and $y$ are indiscernible with respect to
  a set of properties $PO \subseteq P_G \times O_G$
  iff $\forall po \in PO (po(x) \leftrightarrow po(y))$ is the case.

It is important to note that every indiscernibility relation
  is also an equivalence relation, although not necessarily the smallest one.
Moreover, every indiscernibility relation defined over the domain $S_G$
  is also an identity relation,
  just over a different domain \cite{Quine1950}.\footnote{
    For instance, the set of properties
      ``has an income of $x$ euro's a month''
      with $x$ a decimal number, does not uniquely identify people
      (since two people may have the same income),
      but does uniquely identify income groups.
    }

We now reinterpret the identity relation $\approx$,
  as if it were an indiscernibility relation
  whose set of properties $PO$ is implicit.
Based on the extensional specification of the identity relation,
  we can make the set of properties with respect to which
  it is indiscernible explicit.\footnote{
    In Formal Concept Analysis (FCA) literature this set of properties
    is called the intension. The relation between extension and intension
    in FCA is similar to the relation between subject terms and properties,
    but the similarity becomes less apparent when we extend our approach
    to pairs of subject terms (as the `extension') and sets of
    shared predicate terms (as the `intension') later in this section.
    Our thanks go to Cliff Joslyn for pointing this out.
  }
Definition \ref{def:indiscernibility_properties} makes explicit
  the properties relative to which the terms $x_i$ are indiscernibile
  .

%TODO Define for sets or for pairs?
\begin{definition}[Indiscernibility properties]
\label{def:indiscernibility_properties}
\begin{align}
  \indpo_{\approx}(\set{\range{x_1}{x_n}})
=
  \setdef{
    \pair{p}{o} \in P_G \times O_G
  }{\nonumber\\
    \bigwedge_{1 \leq i \leq n}
      \exists p_i \in \equivset{p},
        \exists o_i \in \equivset{o}(
          \triple{x_i}{p_i}{o_i} \in G
        )
% Alternatively, we can place the quantifies outside the conjunction:
%    \exists_{\range{p_1}{p_n} \in \equivset{p}},
%      \exists_{\range{o_1}{o_n} \in \equivset{o}}
%        \bigwedge_{1 \leq i \leq n} \triple{x_i}{p_i}{o_i} \in G
  }\nonumber
\end{align}
\end{definition}

\noindent Using definition \ref{def:indiscernibility_properties},
  we can deduce that the indiscernibility properties for
  the identity pair
  {\small $\pair{\texttt{dbp:Amsterdam}}{\texttt{dbp:Berlin}}$}
  would contain the properties
  ``is a city'' and ``is located in Europe''.

Notice that in definition \ref{def:indiscernibility_properties}
  we close both the predicate terms $p$ and the object terms $o$
  under identity.\footnote{
    It is a common modeling practice in OWL to use equivalence
      instead of identity statements between RDF properties
      (i.e. {\small \texttt{owl:equivalentProperty}})
      and OWL classes
      (i.e. {\small \texttt{owl:equivalentClass}}).
  }
Performing these closures is important in order to identify
  the relevant indiscernibility properties.
Suppose that the RDF resources {\small \texttt{dbp:Berlin}}
  and {\small \texttt{fb:m.0156q}} are identical,
  as are the RDF properties {\small \texttt{schema:containedIn}} and
  {\small \texttt{dbp-owl:locatedInArea}}.
If the database also contains the triples in
  example \ref{ex:triple1} and \ref{ex:triple2},
  we want to be able to identify the pairs in
  {\small $\set{\texttt{schema:containedIn},\texttt{dbp-owl:locatedInArea}}$}
  {\small $\times \set{\texttt{dbp:Berlin},\texttt{fb.0156q}}$}
  as indiscernibility properties.

\small
\begin{example}[Triples]
\begin{align}
\langle
  \texttt{fb:Teufelsberg},\label{ex:triple1}\\
  \texttt{schema:containedIn},\,
  \texttt{dbp:Berlin}
\rangle\nonumber\\
\langle
  \texttt{dbp:Teufelsberg},\label{ex:triple2}\\
  \texttt{dbp-owl:locatedInArea},\,
  \texttt{fb.0156q}
\rangle\nonumber
\end{align}
\end{example}
\normalsize

\noindent In the above, we were interested in the properties
  that resources share with one other
  (e.g., being a city, being located in Europe).
But we are also interested in the predicates that are shared by
  a set of resources.
This amounts to a simple abstraction of
  definition \ref{def:indiscernibility_properties},
  equating the sets of objects (closed under identity)
  and only returning the set of shared RDF predicate terms
  (see definition \ref{def:indiscernibility_predicates}).

\small
\begin{definition}[Indiscernibility predicates]
\label{def:indiscernibility_predicates}
\begin{align}
  \indp_{\approx}(\setrange{x_1}{x_n})
=
  \setdef{
    p \in P_G
  }{
    \exists_{\range{p_1}{p_n} \in \equivset{p}}(\nonumber\\
        \equivset{
          \setdef{
            o \in O_G
          }{
            \triple{x_1}{p_1}{o}
          }
        }
      =
        \ldots
      =
        \equivset{
          \setdef{
            o \in O_G
          }{
            \triple{x_n}{p_n}{o}
          }
        }
    )
  }\nonumber
\end{align}
\end{definition}
\normalsize

\noindent Taking the same example as before, the identity pair
  {\small $\pair{\texttt{dbp:Amsterdam}}{\texttt{dbp:Berlin}}$}
  has the identity closure of ``is a'' and ``is located in''
  as its indiscernibility predicates.



\subsection{Discerning the same}

In the previous section we saw that resources are \mbox{\emph{indiscernible}}
  with respect to $PO$ iff they cannot be told apart
  in a language that only contains the properties denoted by $PO$
  (the so-called indiscernibility properties):

In the same vein,
  and builing upon definition \ref{def:indiscernibility_predicates},
  we say that two pairs of resources are \emph{simi-discernible}
  iff their \mbox{indiscernibility} predicates $P \subseteq P_G$ are the same.

For example, the pair {\small $\pair{\texttt{Amsterdam}}{\texttt{Berlin}}$}
  is simi-discernible to the pair
  {\small $\pair{\texttt{Nanjing}}{\texttt{Dalian}}$},
  because both pairs have the same set of discernibility predicates,
  namely ``is a'' and ``is located in''.

When we look at the pairs that constitute (the extension of)
  an identity relation, all identity assertions look the same.
But when we take the considerations of the previous section into account,
  we see that within a given identity relation
  there are pairs that assert indiscernibility
  based on different domain predicates.
Stating this formally,
  simi-discernibility is an equivalence relation on pairs of resources,
  which induces a partition of the Cartesian product of the domain.
Definition \ref{def:simidiscernibility_relation} makes this concrete
  in terms of the earlier definitions.

\begin{definition}[Simi-discernibility relation]
\label{def:simidiscernibility_relation}
\begin{align}
  \equiv_{\indp_{\approx}}
=
  \setdef{
    \pair{\pair{x_1}{x_2}}{\pair{y_1}{y_2}} \in (S_G^2)^2
  }{\nonumber\\
    \indp_{\approx}(\set{x_1,x_2}) = \indp_{\approx}(\set{y_1,y_2})
  }\nonumber
\end{align}
\end{definition}



\subsection{Partitioning identity}

The members of the partition induced by $\equiv_{\indp_{\approx}}$
  are sets of resource pairs that share the same sharing properties.\footnote{
    We briefly reflect on our wording here.
    \emph{Within} a resource pair, what is shared are properties
      (denoted by a pair of an RDF predicate term and an RDF object term,
      in that order).
    \emph{Between} pairs, what is shared -- if something is shared --
      are predicates, denoted by RDF predicate terms.
  }

Notice that the partitioned pairs contain but are not limited to
  the identity pairs.
Therefore, for sets of pairs closed under simi-discernibility
  we have the following three possibilities:
  \begin{enumerate}
    \item All pairs are identity pairs.
          This characterizes a consistent portion of the identity relation,
          since no simi-discernible pair is left out of this set.
    \item Some pairs are identity pairs.
          This characterizes a portion of the identity relation which is not
          applied consistently with respect to
          the simi-discernibility relation.
    \item No pairs are identity pairs.
          This characterizes a portion of the collection of pairs
          that is consistently kept out of the identity relation.
  \end{enumerate}

\noindent Each member of the simi-discernibility partition that is not
  of the third kind, i.e. every set of pairs that contains some identity pair,
  can be though of as an identity subrelation.
The simi-discernibility partition also partitions the identity relation
  into \emph{identity subrelations}.
Each identity subrelation can be described in terms of
  its discernibility predicates,
  i.e. in meaningful terms drawn from the domain vocabulary.

For instance, in the IIMB dataset that we will use in our experiment
  in sections \ref{sec:implementation} and \ref{sec:experimental_design}
  there are some identical resources that share
  the property {\small \texttt{IIMBTBOX:spoken\_in}},
  while other pairs share the property
  {\small \texttt{IIMBTBOX:form\_of\_government}}.
As a matter of fact, the set of pairs of resources that are spoken in
  the same language (i.e. movies) are disjoint from
  the set of pairs of resources that have the same form of government
  (i.e. countries), indicating identity according to
  different indiscernibility criteria.
In this example, one subset of the identity relation does not discern
  resources that are spoken in the same language,
  whereas another does not discern resources that have
  the same form of government.



\begin{comment}
Fig. 1 shows an example
  of a discernibility partitioning for a given identity relation.

We can thus identify subsets of an identity relation based on
  differences in the sets of properties relative to which
  the resource pairs that they consist of are
  (in)discernible from one another.
Identity of indiscernibility criteria provides
  another equivalence relation
  ($\approx_{\indp}$, def. \ref{def:indiscernibility_partition}),
  that partitions the identity relation $\approx$ into
  identity subrelations that characterize identity based on different
  indiscernibility criteria.

\begin{figure*}
\label{fig:iimb_example}
\centering
\includegraphics[width=\textwidth]{iimb_approximation_example_crop}
\caption{
  An example of a discernibility partition for an identity relation
    consisting of 365 pairs applied to the fourth IIMB linkset.
  Each node is annotated with the set of predicates $P$ for which
    its pairs are $P$-indiscernible.
  The number of identity pairs within each partition set
    is displayed to the right of the predicate set label.
  Partition sets that contain no identity pair are not show.
  The number that occurs to the left of the predicate label in each node
    indicates how may pairs in that node are identity pairs.
  The lower approximation consists of the nodes with a solid border,
    indicating that they contain only identity pairs.
  The higher approximation consists of all displayed nodes.}
\end{figure*}
\end{comment}

